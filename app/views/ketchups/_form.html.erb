<%#= simple_form_for [@trip, @ketchup], data: { controller: "places", action: "google-maps-callback@window->places#initializeMap" } do |f| %>
  <%#= f.association :user, collection: @friends, label: 'Friends', :label_method => :full_name, :value_method => :id, prompt: "Choose a friend" %>
  <%#= f.input :start_date, label: 'Start date & time (UTC)' %>
  <%#= f.input :end_date, label: 'End date & time (UTC)' %>
  <%#= f.input :start_time %>
  <%#= f.input :duration, label: 'Duration (in min)', input_html: { value: 30, min: 30, step: 15 } %>
  <%#= f.input :location, data: { target: "places.field" } %>
  <%#= f.input :latitude, :as => :hidden, data: { target: "places.latitude" } %>
  <%#= f.input :longitude, :as => :hidden, data: { target: "places.longitude" } %>
  <%#= f.input :message %>
  <%#= f.submit "Send ketchup request", class: "btn btn-flat" %>
<%# end %>

<%= form_with model: [@trip, @ketchup], local: true, id: 'ketchup-form' do |form| %>
  <div class="form-group">
    <%= form.label 'Choose a friend to ketchup with:' %>
    <%= form.collection_select :user_id, @friends, :id, :full_name, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= form.label 'Start date & time (UTC)' %>
    <%= form.text_field :start_date, class: 'daterange form-control' %>
  </div>

  <div class="form-group">
    <%= form.label 'Duration (in min)' %>
    <%= form.text_field :duration, type: "number", value: 30, min: 30, step: 15, class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= form.label "Where do you want to Ketchup" %>
    <%= form.text_field :location, class: 'form-control', onkeypress: "return event.keyCode!=13" %>
    <%= form.text_field :latitude, type: "hidden", class: 'form-control' %>
    <%= form.text_field :longitude, type: "hidden", class: 'form-control' %>
  </div>

  <div class="form-group">
    <%= form.label :message %>
    <%= form.text_field :message, class: 'form-control' %>
  </div>

  <div class="actions">
    <%= form.submit "Send ketchup request", class: 'btn btn-flat' %>
  </div>
<% end %>
